import React, { useEffect, useState } from 'react';
import Head from 'next/head';
import axios from 'axios';
import CategoryContainer from '@/components/Layout/CategoryContainer/CategoryContainer';

export default function Home() {
  const [categories, setCategories] = useState([]);

  useEffect(() => {
    getProducts();
  }, []);

  const getProducts = async () => {
    const url = 'http://localhost:3000/api/categories';
    const response = await axios.get(url);
    setCategories(response.data.categories);
  };

  console.log(categories);

  return (
    <>
      <Head>
        <title>MyCoolStore</title>
        <meta name='description' content='Generated by create next app' />
        <meta name='viewport' content='width=device-width, initial-scale=1' />
        <link rel='icon' href='/favicon.ico' />
      </Head>
      {categories.map((category, i) => {
        return <CategoryContainer key={i} category={category} />;
      })}
    </>
  );
}
